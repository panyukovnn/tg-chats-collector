
# tg-chats-collector

Позволяет извлекать историю приватных и публичных чатов в телеграм

---

### Особенности деплоя на сервер

перед первым деплоем необходимо:

- запустить микросервис и залогинится в telegram, чтобы создалась папка tdlight-session
- заполнить deploy/config.env
- выполнить deploy/init-server.sh

деплой:

- выполняется через github workflow deploy-tag


--- 

# Что требуется сделать

- добавить сохранение сообщений в бд при выгрузке
    Алгоритм:
    1 - определяем идентификатор чата и топика
    2 - находим в бд самое первое и самое последнее сообщение по данным идентификаторам
    3 - также выгружаем количество сообщений по данным параметрам
    4 - загружаем сообщения из чата до тех пор, пока не встретим то, которое уже сохранено в бд
    5 - держим отдельную табличку с информацией о загрузке из данного чата/топика:
        - с каким лимитом были загружены сообщения
        - до какой даты
        - были ли загружены вообще все сообщения

Что хочу видеть:
- открываю ui, там видны чаты
- можно найти чат по названию (это потом)
- можно выбрать чат и нажать - загрузить историю
- можно листать историю (не обязательно)
- можно выбрать чат и нажать - проиндексировать rag, и показывается когда в последний раз проиндексирован rag
- есть оно чата с ИИ, где я могу выбрать чат с человеком и попросить по нему что-нибудь найти или сделать


- добавить ручку для поиска нужного топика по части имени и по части имени чата
